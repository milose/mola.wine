!function(e){function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=1)}({1:function(e,n,t){e.exports=t("RIW2")},"1REt":function(e,n,t){"use strict";n.a=function(e,n,t,i,r){var a=new e.maps.Marker({id:t.id,map:n,position:new e.maps.LatLng(t.lat,t.lng),icon:r});return a.addListener("click",function(){i.setContent(o(t)),i.open(n,a)}),a};var o=function(e){var n=document.createElement("div"),t=document.createElement("div"),o=document.createElement("div"),i=document.createElement("i"),r=document.createElement("a");return t.className="bb mbh",t.textContent=e.name,o.className="mb",o.textContent=e.address,i.className="fa fa-fv fa-external-link",r.href="https://maps.google.com/maps?ll="+e.lat+","+e.lng,r.target="_blank",r.className="button is-primary is-small",r.innerHTML="Open in App &nbsp;",r.appendChild(i),n.appendChild(t),n.appendChild(o),n.appendChild(r),n}},RIW2:function(e,n,t){"use strict";function o(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}Object.defineProperty(n,"__esModule",{value:!0});var i=t("1REt");window.app=new Vue({el:"#app",data:{icon:{},needle:"",markers:[],allVenues:[],infoWindow:{},resultsFound:!0,visibleVenues:[],currentLocation:{lat:42.5,lng:19.3,zoom:10},readingLocation:!1},methods:{createMap:function(){var e=this;this.map=new google.maps.Map(document.getElementById("map"),{center:new google.maps.LatLng(this.currentLocation.lat,this.currentLocation.lng),scrollwheel:!1,zoom:this.currentLocation.zoom}),this.map.addListener("bounds_changed",function(){var n=e.map.getBounds();e.visibleVenues=[],e.markers.forEach(function(t){n.contains(t.getPosition())&&e.visibleVenues.push(e.allVenues.find(function(e){return e.id==t.id}))})}),this.infoWindow=new google.maps.InfoWindow,this.icon={url:"/img/mola-pin.png",scaledSize:new google.maps.Size(24,34)},this.getVenuesFromApi()},getVenuesFromApi:function(){var e=this;axios.get("/api/venues").then(function(n){e.allVenues=n.data,e.loadMarkers()})},loadMarkers:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.allVenues;this.needle="",this.resultsFound=!0,this.markers=[],n.forEach(function(n){e.markers.push(t.i(i.a)(google,e.map,n,e.infoWindow,e.icon))}),this.showMarkersOnMap()},showCurrentLocation:function(){var e=this;this.needle="",this.resultsFound=!0,this.readingLocation=!0,navigator.geolocation.getCurrentPosition(function(n){e.currentLocation={lat:n.coords.latitude,lng:n.coords.longitude,zoom:18};try{e.map.setCenter(new google.maps.LatLng(e.currentLocation.lat,e.currentLocation.lng)),e.map.setZoom(e.currentLocation.zoom)}catch(e){}e.readingLocation=!1},function(){e.readingLocation=!1})},showVenue:function(e){this.needle="",this.resultsFound=!0,this.map.setCenter(new google.maps.LatLng(e.lat,e.lng)),this.map.setZoom(18)},showMarkersOnMap:function(){var e=new google.maps.LatLngBounds;this.markers.forEach(function(n){return e.extend(n.getPosition())}),this.map.setCenter(e.getCenter()),this.map.fitBounds(e);var n=this.map.getZoom()-1;n>18&&(n=18),this.map.setZoom(n)},loadMarkersForCity:function(e){this.needle="",this.resultsFound=!0,this.loadMarkers([].concat(o(new Set(this.allVenues.filter(function(n){return n.city==e})))))},loadMarkersFromSearch:function(){var e=this.needle.toLowerCase(),n=[].concat(o(new Set(this.allVenues.filter(function(n){return n.name.toLowerCase().includes(e)||n.address.toLowerCase().includes(e)||n.city.toLowerCase().includes(e)}))));if(!n.length)return void(this.resultsFound=!1);this.loadMarkers(n),this.resultsFound=!0},blurInput:function(e){e.target.blur()}},computed:{filtered:function(){return this.allVenues>this.visibleVenues},citiesOfVisible:function(){return[].concat(o(new Set(this.visibleVenues.map(function(e){return e.city}))))},citiesOfAll:function(){return[].concat(o(new Set(this.allVenues.map(function(e){return e.city}))))}}})}});